<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Thronics โ ููุชุจุฉ</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#07080b;
      --card:#0f1720;
      --muted:#9aa3b7;
      --accent:#2ef7b7;
      --accent-2:#6be4ff;
      --danger:#ff6b6b;
      --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Poppins, Montserrat, sans-serif;background:
      radial-gradient(1200px 400px at 10% 10%, rgba(107,228,255,0.02), transparent 10%),
      linear-gradient(180deg,#050608 0%, #0b0f14 100%);color:#eaf0ff}
    body{direction:rtl}
    .container{max-width:1200px;margin:30px auto;padding:20px}

    /* Header */
    header{display:flex;align-items:center;gap:16px}
    .logo{font-weight:800;font-size:22px;letter-spacing:0.6px;color:var(--accent);
      text-shadow:0 10px 40px rgba(46,247,183,0.06),0 0 18px rgba(107,228,255,0.03)}
    .subtitle{color:var(--muted);font-size:14px}

    /* Welcome overlay (big, fancy animation) */
    .welcome{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg, rgba(2,6,23,0.8), rgba(2,6,23,0.95));z-index:1000;pointer-events:auto}
    .welcome-card{
      width:94%;max-width:980px;border-radius:20px;padding:28px;border:1px solid rgba(255,255,255,0.04);
      background:linear-gradient(135deg, rgba(46,247,183,0.02), rgba(107,228,255,0.02));
      box-shadow: 0 30px 120px rgba(46,247,183,0.03), inset 0 -6px 40px rgba(0,0,0,0.6);
      transform:translateY(20px) scale(.98);opacity:0;backdrop-filter: blur(6px);
      animation:welcomeIn .9s cubic-bezier(.2,.9,.2,1) forwards;
      overflow:hidden;position:relative;
    }
    @keyframes welcomeIn { from{ opacity:0; transform:translateY(40px) scale(.98) } to{ opacity:1; transform:none } }
    .welcome-graphic{position:absolute;inset:-20% -10% auto auto;width:60%;height:200px;background:
      radial-gradient(circle at 20% 30%, rgba(46,247,183,0.06), transparent 6%),
      radial-gradient(circle at 80% 80%, rgba(107,228,255,0.05), transparent 8%);transform:rotate(8deg);opacity:.9}
    .welcome h1{margin:0;font-size:36px;color:var(--accent);font-weight:900;letter-spacing:0.6px}
    .welcome p{color:var(--accent-2);margin:12px 0 18px;font-weight:600}
    .welcome .controls{display:flex;gap:12px;align-items:center}
    .btn-enter{
      padding:12px 22px;border-radius:14px;background:linear-gradient(90deg,var(--accent),var(--accent-2));
      border:none;color:#001;cursor:pointer;font-weight:800;box-shadow:0 12px 40px rgba(46,247,183,.06)
    }
    .btn-ghost{padding:10px 18px;border-radius:12px;background:transparent;border:1px solid rgba(255,255,255,0.04);
      color:var(--accent);cursor:pointer;font-weight:700}

    /* Fade-out animation when hiding welcome */
    .welcome-hide { animation: welcomeOut .8s cubic-bezier(.2,.9,.2,1) forwards; pointer-events:none }
    @keyframes welcomeOut { to { opacity:0; transform:translateY(-30px) scale(.98); filter: blur(2px) } }

    /* reveal helpers */
    .hidden {opacity:0;transform:translateY(20px);transition:opacity .6s ease, transform .6s ease}
    .show {opacity:1;transform:translateY(0)}

    /* instruction cards */
    .instructions{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px;margin-top:28px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.018), rgba(255,255,255,0.01));
      padding:18px;border-radius:14px;border:1px solid rgba(255,255,255,0.03);min-height:120px;position:relative;overflow:hidden}
    .card h3{margin:0 0 8px;font-size:16px}
    .card p{margin:0;color:var(--muted);font-size:13px}
    .card .accent-dot{position:absolute;left:12px;top:12px;width:10px;height:10px;border-radius:50%;
      background:linear-gradient(90deg,var(--accent),var(--accent-2));box-shadow:0 6px 18px rgba(46,247,183,0.06)}

    /* comparison table (force LTR inside to keep columns order correct) */
    .compare{margin-top:30px;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.04)}
    .compare .compare-grid{direction:ltr;display:grid;grid-template-columns:240px 1fr 1fr;gap:0}
    .compare-header{display:flex;align-items:center;justify-content:center;padding:18px;background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));font-weight:800}
    .row{display:flex;align-items:center;padding:18px;border-top:1px solid rgba(255,255,255,0.02)}
    .criteria{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));font-weight:700}
    .check{display:inline-flex;align-items:center;justify-content:center;width:44px;height:32px;border-radius:8px;background:rgba(46,247,183,0.08);color:var(--accent);font-weight:700}
    .bad{background:rgba(255,107,107,0.06);color:var(--danger)}
    .detail-strong{color:var(--accent-2);font-weight:700}

    /* mini-grid */
    .mini-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;padding:14px}
    .mini{height:70px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
      display:flex;align-items:center;justify-content:center;font-size:12px;color:var(--muted);box-shadow:0 10px 30px rgba(2,6,23,0.6);
      transform:translateY(12px);opacity:0}
    .mini.show{animation:miniIn .6s forwards}
    @keyframes miniIn{to{transform:none;opacity:1}}

    /* map selector */
    .maps{margin-top:24px;display:flex;gap:16px;align-items:start;flex-wrap:wrap}
    .maps .panel{flex:1;background:var(--card);padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
    .map-toggle{display:flex;align-items:center;gap:10px;cursor:pointer}
    .plus{width:46px;height:46px;border-radius:10px;background:linear-gradient(90deg, rgba(46,247,183,0.06), rgba(107,228,255,0.06));display:flex;align-items:center;justify-content:center;font-weight:900}
    .map-list{margin-top:12px;max-height:0;overflow:hidden;transition:max-height .5s cubic-bezier(.2,.9,.2,1), opacity .3s;opacity:0}
    .map-list.show{max-height:320px;opacity:1}
    .map-item{padding:10px;border-radius:8px;margin-bottom:8px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);cursor:pointer}

    /* encryption UI */
    .enc{margin-top:28px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:14px;border:1px solid rgba(255,255,255,0.03)}
    .code-area{background:linear-gradient(180deg, rgba(0,0,0,0.25), rgba(255,255,255,0.02));padding:14px;border-radius:12px;position:relative;min-height:80px;font-family:monospace;color:#dffcf0;direction:ltr;text-align:left}
    .copy-btn{position:absolute;top:12px;left:12px;background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px;border-radius:10px;cursor:pointer}
    .copy-icon{display:inline-block;vertical-align:middle}

    /* toast */
    .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:28px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#002;border-radius:12px;padding:10px 16px;font-weight:800;box-shadow:0 10px 40px rgba(46,247,183,0.08);opacity:0;pointer-events:none;transition:opacity .25s}
    .toast.show{opacity:1}

    /* big stat cards */
    .stats{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:20px}
    .stat{padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008));text-align:center}
    .stat h4{margin:0;font-size:13px;color:var(--muted)}
    .stat .num{font-size:28px;font-weight:900;color:var(--accent);margin-top:8px}

    /* small responsive tweaks */
    @media (max-width:900px){
      .compare .compare-grid{grid-template-columns:180px 1fr}
      .compare .compare-grid > :nth-child(3){display:none}
      .mini-grid{grid-template-columns:repeat(4,1fr)}
      .maps{flex-direction:column}
      .welcome h1{font-size:28px}
    }
  </style>
</head>
<body>
  <!-- Welcome (appears automatically, then hides) -->
  <div class="welcome" id="welcome" role="dialog" aria-label="ุชุฑุญูุจ Thronics">
    <div class="welcome-card" id="welcomeCard">
      <div class="welcome-graphic" aria-hidden="true"></div>
      <h1>Thronics โ ููุชุจุฉ</h1>
      <p>ุงูุจุฑูุงูุฌ ุงููุตู ุงูุดุงูู ูุฃูุซุฑ ูู 125 ูุนุจุฉ โ ูุฑุญุจุงู ุจู! ุงููููุน ููุชุญ ุชููุงุฆูุงู ุจุนุฏ ุงูุงูููุดูู.</p>
      <div class="controls" style="margin-top:8px">
        <button class="btn-enter" id="enterBtn" title="ุนุฑุถ ุงููุญุชูู ุงูุขู">ุนุฑุถ ุงูุขู</button>
        <button class="btn-ghost" id="closeWelcome">ุฅุฎูุงุก ุงูุชุฑุญูุจ</button>
      </div>
      <div style="margin-top:14px;color:var(--muted);font-size:13px">
        ุงูููุดูู ุฏุฎูู ูุงุฎุฑ โ ุณุชุฎุชูู ูุฐู ุงููุงูุฐุฉ ุชููุงุฆูุงู ุจุนุฏ ุงูุนุฑุถ.
      </div>
    </div>
  </div>

  <!-- Main container (ูุฎููุฉ ุฃููุงู ุญุชู ูุธูุฑ ุจุนุฏ ุงูุงููููุดู) -->
  <div class="container hidden" id="main" aria-live="polite">
    <header>
      <div class="logo">Thronics</div>
      <div style="flex:1"></div>
      <div class="subtitle">ููุชุจุฉ / ูุงุฌูุฉ ูุชูุฏูุฉ ูุฎูุฉ ูุน ุชุฃุซูุฑุงุช ูุฃูููุดูู</div>
    </header>

    <!-- instruction cards -->
    <section class="instructions" aria-label="ุชุนูููุงุช">
      <div class="card" id="card1"><div class="accent-dot"></div><h3>ุชุนูููุงุช ุงูุชุซุจูุช</h3><p>ุชุญููู โ ุงุณุชุฎุฑุงุฌ โ ุชุฑููุจ. ุงุชุจุน ูุณุฎุฉ README ุงูุฏุงุฎููุฉ ููู ูุนุจุฉ.</p></div>
      <div class="card" id="card2"><div class="accent-dot"></div><h3>ูุธุงู ุงูุชุดููุฑ</h3><p>ุณูุฑุจุชุงุช ูุญููุฉ ุจูุงุฌูุฉ ุชุดููุฑ ุงูุชุฑุงุถูุฉ ูุนุฑุถ ุขูู.</p></div>
      <div class="card" id="card3"><div class="accent-dot"></div><h3>ูุตุงุฆุญ ุงูุฃุฏุงุก</h3><p>ุฎูู ุงูุฑุณููุงุช ุฅู ุงุญุชุฌุช ูุฑูุน FPSุ ูุงุณุชุฎุฏู ุงููุณุฎุฉ ุงูููุญุณููุฉ.</p></div>
      <div class="card" id="card4"><div class="accent-dot"></div><h3>ุงูุฏุนู</h3><p>ุฏูุณููุฑุฏ ูุดุท 24/7 โ ุงูุถู ูุทูุจ ุงููุณุงุนุฏุฉ ูุงูุชุญุฏูุซุงุช.</p></div>
    </section>

    <!-- comparison table -->
    <section class="compare" aria-label="ููุงุฑูุฉ">
      <div class="compare-grid" role="table" aria-label="ููุงุฑูุฉ Thronics ูุน ุณูุฑุจุชุงุช ุฃุฎุฑู">
        <div class="compare-header">Criteria</div>
        <div class="compare-header">Thronics</div>
        <div class="compare-header">Other Scripts</div>

        <div class="row criteria">Performance / FPS impact</div>
        <div class="row"><div class="check">โ</div></div>
        <div class="row"><div class="check bad">โ</div></div>

        <div class="row criteria">Supporting many games</div>
        <div class="row"><div class="check">โ</div></div>
        <div class="row"><div class="check bad">โ</div></div>

        <div class="row criteria">Updates within 24 h</div>
        <div class="row"><div class="check">โ</div></div>
        <div class="row"><div class="check bad">โ</div></div>

        <div class="row criteria">Detection rate</div>
        <div class="row"><div class="check">โ<div style="font-size:12px;margin-right:8px;color:var(--accent-2)">(ultra-low)</div></div></div>
        <div class="row"><div class="check bad">โ<div style="font-size:12px;margin-right:8px;color:var(--danger)">(high)</div></div></div>

        <div class="row criteria">Completely Free</div>
        <div class="row"><div class="check">โ</div></div>
        <div class="row"><div class="check bad">โ<div style="font-size:12px;margin-right:8px;color:var(--danger)">(pay-wall)</div></div></div>

        <div class="row criteria">Active Discord 24/7</div>
        <div class="row"><div class="check">โ</div></div>
        <div class="row"><div class="check bad">โ</div></div>
      </div>

      <!-- mini boxes under each column (7 each) -->
      <div style="display:flex;gap:12px;padding:14px;direction:ltr">
        <div style="flex:1;background:transparent;padding:8px;border-radius:10px">
          <div style="color:var(--muted);font-weight:700;margin-bottom:8px">Criteria</div>
          <div class="mini-grid" id="minis1">
            <div class="mini">1</div><div class="mini">2</div><div class="mini">3</div>
            <div class="mini">4</div><div class="mini">5</div><div class="mini">6</div><div class="mini">7</div>
          </div>
        </div>
        <div style="flex:1;padding:8px;border-radius:10px">
          <div style="color:var(--muted);font-weight:700;margin-bottom:8px">Thronics</div>
          <div class="mini-grid" id="minis2">
            <div class="mini">ุตูุฑุฉ</div><div class="mini">ุตูุฑุฉ</div><div class="mini">ุตูุฑุฉ</div>
            <div class="mini">ุตูุฑุฉ</div><div class="mini">ุตูุฑุฉ</div><div class="mini">ุตูุฑุฉ</div><div class="mini">ุตูุฑุฉ</div>
          </div>
        </div>
        <div style="flex:1;padding:8px;border-radius:10px">
          <div style="color:var(--muted);font-weight:700;margin-bottom:8px">Other Scripts</div>
          <div class="mini-grid" id="minis3">
            <div class="mini">X</div><div class="mini">X</div><div class="mini">X</div>
            <div class="mini">X</div><div class="mini">X</div><div class="mini">X</div><div class="mini">X</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Maps area (with + toggle showing fancy animated list) -->
    <section class="maps" aria-label="ุงููุงุจุงุช">
      <div class="panel">
        <div class="map-toggle" id="mapToggle" role="button" aria-expanded="false" aria-controls="mapList">
          <div class="plus" id="plusSign">+</div>
          <div style="flex:1">
            <div style="font-weight:800">ุงููุงุจุงุช ุงููุชุงุญุฉ</div>
            <div style="color:var(--muted);font-size:13px">ุงุถุบุท + ูุนุฑุถ ุงููุงุจุงุช</div>
          </div>
        </div>
        <div class="map-list" id="mapList" aria-hidden="true">
          <div class="map-item">Map_Desert</div>
          <div class="map-item">Map_Forest</div>
          <div class="map-item">Map_Urban</div>
          <div class="map-item">Map_Sky</div>
          <div class="map-item">Map_Arena</div>
        </div>
      </div>

      <div class="panel" style="flex:1.2">
        <div style="display:flex;align-items:center;justify-content:space-between">
          <div style="font-weight:800">ูุงุฆูุฉ ุงููุงุจุงุช ููุงุฎุชูุงุฑ</div>
          <div style="display:flex;gap:10px;align-items:center">
            <div style="color:var(--muted);font-size:13px">ุงุฎุชุฑ ูุงุจ ูุชุทุจูู ุงูุณูุฑุจุช</div>
            <button class="plus" id="showMapBtn" aria-controls="mapPanelList" aria-expanded="false">+</button>
          </div>
        </div>
        <div style="margin-top:12px;color:var(--muted)">ุงุถุบุท + ูุฅุธูุงุฑ/ุฅุฎูุงุก ุงููุงุฆูุฉ ูุน ุฃูููุดูู ูุฎู.</div>
        <div id="mapPanelList" class="map-list" style="margin-top:12px" aria-hidden="true"></div>
      </div>
    </section>

    <!-- Encryption UI and stats -->
    <section class="enc" aria-label="ูุงุฌูุฉ ุงูุชุดููุฑ">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <div style="font-weight:800">ูุงุฌูุฉ ุงูุชุดููุฑ โ Thronics Script</div>
        <div style="color:var(--muted);font-size:13px">ูุณุฎุฉ ูุญููุฉ โ ุงููุฑ ูุณุฎ ููุณุฎ ุงูุณูุฑุจุช</div>
      </div>

      <div class="code-area" id="codeArea" role="region" aria-label="ุงูููุฏ">
        <button class="copy-btn" id="copyBtn" title="ูุณุฎ ุงูุณูุฑุจุช">
          <span class="copy-icon" id="copyIcon">๐</span>
        </button>
        <!-- ูุต ุงูุณูุฑุจุช (ููููู ุชุบููุฑู ุฅูู ุงูุณูุฑุจุช ุงูุญูููู) -->
        <div id="scriptText" aria-hidden="false">
-- Thronics | Encrypted Script
-- ูุซุงู ุนุฑุถู ููุท
local key = "THR0N1CS-ENCRYPTED-EXAMPLE"
print("ุชุญููู...")
-- ุงูุณุฎ ุงูุฒุฑ ููุณุฎ ุงููุต ุงููุงูู
        </div>
      </div>

      <div class="stats" style="margin-top:16px" aria-hidden="false">
        <div class="stat"><h4>ุงููุทูุฑูู</h4><div class="num" id="devsNum">0</div></div>
        <div class="stat"><h4>ุนุฏุฏ ุงููุณุชุฎุฏููู</h4><div class="num" id="usersNum">0</div></div>
        <div class="stat"><h4>ุงููููุฐูู</h4><div class="num" id="execNum">0</div></div>
      </div>
    </section>

  </div>

  <div class="toast" id="toast" role="status" aria-live="polite">ุชู ุงููุณุฎ โ</div>

  <script>
    /* =========================
       Utilities (robust & safe)
       ========================= */
    function easeOutCubic(t){ return 1 - Math.pow(1 - t, 3); }

    // ุนุฑุถ ุงูุนุฏุฏ ุจููุท ุฐูู (k/m)
    function formatNumberSmart(n){
      n = Math.floor(n);
      if(n >= 1000000) return (n/1000000).toFixed(1).replace(/\.0$/,'') + 'm';
      if(n >= 1000) return Math.round(n/1000) + 'k';
      return String(n);
    }

    // animation counter (smooth)
    function animateValue(id, start, end, duration=1000){
      const el = document.getElementById(id);
      if(!el) return;
      let startTime = null;
      const step = (timestamp) => {
        if(!startTime) startTime = timestamp;
        const progress = Math.min((timestamp - startTime) / duration, 1);
        const eased = easeOutCubic(progress);
        const value = Math.floor(start + (end - start) * eased);
        el.textContent = formatNumberSmart(value);
        if(progress < 1) requestAnimationFrame(step);
        else el.textContent = formatNumberSmart(end);
      };
      requestAnimationFrame(step);
    }

    // resilient copy (Clipboard API + fallback)
    async function safeCopy(text){
      if(navigator.clipboard && navigator.clipboard.writeText){
        try { await navigator.clipboard.writeText(text); return true; }
        catch(e){ /* continue to fallback */ }
      }
      try {
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.style.position = 'fixed';
        ta.style.left = '-9999px';
        document.body.appendChild(ta);
        ta.select();
        ta.setSelectionRange(0, ta.value.length);
        document.execCommand('copy');
        ta.remove();
        return true;
      } catch(e) { return false; }
    }

    function showToast(msg='ุชู'){
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(()=>toast.classList.remove('show'), 1600);
    }

    /* =========================
       Page behavior & logic
       ========================= */
    const welcome = document.getElementById('welcome');
    const welcomeCard = document.getElementById('welcomeCard');
    const main = document.getElementById('main');
    const enterBtn = document.getElementById('enterBtn');
    const closeWelcome = document.getElementById('closeWelcome');

    // revealMain(): ูุฎุชูู ุงูุชุฑุญูุจ ููุธูุฑ ุงููุญุชูู ุงูุฑุฆูุณู ูุน ุฃููููุดู
    function revealMain(){
      if(!welcome) return;
      // hide overlay with animation
      welcome.classList.add('welcome-hide');
      // give time ููุฃููููุดู ุซู ุฅุฎูุงุก DOM ูุงุธูุงุฑ ุงููุญุชูู
      setTimeout(()=>{
        welcome.style.display = 'none';
        main.classList.remove('hidden');
        setTimeout(()=> main.classList.add('show'), 30);

        // show mini boxes staggered
        document.querySelectorAll('.mini').forEach((el, i)=>{
          setTimeout(()=> el.classList.add('show'), 120 + i*80);
        });

        // animate stats
        animateValue('devsNum', 0, 4, 900);
        animateValue('execNum', 0, 6000, 1400);
        const usersStored = Number(localStorage.getItem('th_users') || 2345);
        animateValue('usersNum', 0, usersStored, 1200);
      }, 720); // match welcomeOut duration
    }

    // Show welcome again (if user wants)
    function showWelcome(){
      welcome.style.display = 'flex';
      welcome.classList.remove('welcome-hide');
      // restart entrance animation
      welcomeCard.style.animation = 'none';
      // force reflow to restart animation
      void welcomeCard.offsetWidth;
      welcomeCard.style.animation = '';
      welcomeCard.style.animation = 'welcomeIn .9s cubic-bezier(.2,.9,.2,1) forwards';
      // auto-hide again after delay
      scheduleAutoHide();
    }

    enterBtn.addEventListener('click', revealMain);
    closeWelcome.addEventListener('click', revealMain);

    // Auto-hide welcome after spectacular animation completes (custom timings)
    let autoHideTimer = null;
    function scheduleAutoHide(){
      if(autoHideTimer) clearTimeout(autoHideTimer);
      // total show time before hiding (in ms). ููููู ุชุนุฏูู ูุชุทูู ูุฏุฉ ุงูุนุฑุถ
      autoHideTimer = setTimeout(()=>{ revealMain(); }, 3000);
    }

    // Start: show welcome automatically then hide
    document.addEventListener('DOMContentLoaded', ()=>{
      // ensure welcome is visible initially; schedule hide
      scheduleAutoHide();

      // Prepare map toggles and mini boxes
      setupMapToggles();

      // Setup copy button behavior
      setupCopyButton();
    });

    /* =========================
       Map toggles (animated list)
       ========================= */
    function setupMapToggles(){
      const mapToggle = document.getElementById('mapToggle');
      const mapList = document.getElementById('mapList');
      const plus = document.getElementById('plusSign');
      const showMapBtn = document.getElementById('showMapBtn');
      const mapPanelList = document.getElementById('mapPanelList');

      if(mapToggle){
        mapToggle.addEventListener('click', ()=>{
          const show = mapList.classList.toggle('show');
          mapToggle.setAttribute('aria-expanded', String(show));
          mapList.setAttribute('aria-hidden', String(!show));
          plus.textContent = show ? 'โ' : '+';
        });
      }

      if(showMapBtn){
        showMapBtn.addEventListener('click', ()=>{
          const was = mapPanelList.classList.contains('show');
          if(was){
            mapPanelList.classList.remove('show');
            showMapBtn.textContent = '+';
            showMapBtn.setAttribute('aria-expanded','false');
            mapPanelList.setAttribute('aria-hidden','true');
          } else {
            mapPanelList.classList.add('show');
            showMapBtn.textContent = 'โ';
            showMapBtn.setAttribute('aria-expanded','true');
            mapPanelList.setAttribute('aria-hidden','false');

            // populate with items (animated)
            mapPanelList.innerHTML = '';
            const items = ['Desert','Forest','Urban','Sky','Arena','Cave','ColdZone'];
            items.forEach((it,i)=>{
              const div = document.createElement('div');
              div.className = 'map-item';
              div.textContent = it;
              // initial style for animation
              div.style.opacity = '0';
              div.style.transform = 'translateY(8px)';
              div.style.transition = `all .38s cubic-bezier(.2,.9,.2,1) ${i*70}ms`;
              setTimeout(()=>{ div.style.opacity = '1'; div.style.transform = 'none'; }, 60 + i*70);
              div.addEventListener('click', ()=>{
                // visual selection
                document.querySelectorAll('.map-item').forEach(x=>{ x.style.border = ''; x.style.background = ''; });
                div.style.background = 'linear-gradient(90deg, rgba(46,247,183,0.06), rgba(107,228,255,0.04))';
                div.style.border = '1px solid rgba(46,247,183,0.12)';
              });
              mapPanelList.appendChild(div);
            });
          }
        });
      }
    }

    /* =========================
       Copy button logic & counters
       ========================= */
    function setupCopyButton(){
      const copyBtn = document.getElementById('copyBtn');
      const copyIcon = document.getElementById('copyIcon');
      const scriptTextEl = document.getElementById('scriptText');
      const usersNumEl = document.getElementById('usersNum');

      if(!copyBtn || !scriptTextEl) return;

      copyBtn.addEventListener('click', async ()=>{
        const text = scriptTextEl.innerText || scriptTextEl.textContent || '';
        const ok = await safeCopy(text);
        if(ok){
          copyIcon.textContent = 'โ';
          copyBtn.style.transform = 'scale(.985)';
          setTimeout(()=>copyBtn.style.transform = '', 180);

          // toast confirmation
          showToast('ุชู ูุณุฎ ุงูุณูุฑุจุช');

          // increment stored users counter and animate
          let users = Number(localStorage.getItem('th_users') || 2345);
          const currentDisplayed = Number((usersNumEl.textContent || '0').replace(/[^0-9]/g,'')) || 0;
          users = users + 1;
          localStorage.setItem('th_users', users);
          animateValue('usersNum', currentDisplayed, users, 900);

          // restore icon
          setTimeout(()=>{ copyIcon.textContent = '๐'; }, 900);
        } else {
          showToast('ูุดู ุงููุณุฎ');
        }
      });
    }

    /* =========================
       initial placeholders / safety
       ========================= */
    // placeholders in case not animated yet
    document.getElementById('devsNum').textContent = '0';
    document.getElementById('usersNum').textContent = '0';
    document.getElementById('execNum').textContent = '0';

    // Expose showWelcome to console or future controls (optional)
    window.showThronicsWelcome = showWelcome;
  </script>
</body>
  </html>
